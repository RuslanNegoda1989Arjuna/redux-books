"use strict";(self.webpackChunkredux_books=self.webpackChunkredux_books||[]).push([[834],{6834:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var r=n(4165),s=n(3433),a=n(5861),c=n(9439),o=n(2791),i=n(1087),u=n(8703),l=n(1413),h=n(4942),p=n(5671),d=n(3144),f=n(136),m=n(516),g=n(184),v=function(e){(0,f.Z)(n,e);var t=(0,m.Z)(n);function n(){var e;(0,p.Z)(this,n);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={search:""},e.handleChange=function(t){var n=t.target,r=n.name,s=n.value,a=n.checked,c="checkbox"===n.type?a:s;e.setState((0,h.Z)({},r,c))},e.handleSubmit=function(t){t.preventDefault(),(0,e.props.onSubmit)((0,l.Z)({},e.state)),e.reset()},e}return(0,d.Z)(n,[{key:"reset",value:function(){this.setState({search:""})}},{key:"render",value:function(){var e=this.state.search;return(0,g.jsxs)("form",{onSubmit:this.handleSubmit,children:[(0,g.jsx)("input",{name:"search",value:e,onChange:this.handleChange,placeholder:"Search post",required:!0}),(0,g.jsx)("button",{type:"submit",children:"Search"})]})}}]),n}(o.Component),x=v,j=n(387),_="posts-search_heading__f1nWL",Z="posts-search_error__jnmRK",b=function(){var e=(0,o.useState)([]),t=(0,c.Z)(e,2),n=t[0],l=t[1],h=(0,o.useState)("idle"),p=(0,c.Z)(h,2),d=p[0],f=p[1],m=(0,o.useState)(null),v=(0,c.Z)(m,2),b=v[0],k=v[1],S=(0,i.lr)(),y=(0,c.Z)(S,2),C=y[0],N=y[1],w=C.get("search"),L=Number(C.get("page"));(0,o.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f("pending"),e.next=4,(0,j.cl)(w,L);case 4:t=e.sent,n=t.data,l((function(e){return[].concat((0,s.Z)(e),(0,s.Z)(n))})),f("success"),e.next=16;break;case 10:e.prev=10,e.t0=e.catch(0),a=e.t0.response,c=a.data.message||"Cannot fetch posts",k(c),f("error");case 16:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();w&&e()}),[w,L]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h2",{className:_,children:"Posts"}),(0,g.jsx)(x,{onSubmit:function(e){var t=e.search;N({search:t,page:1}),l([])}}),"pending"===d&&(0,g.jsx)("p",{children:"....Loading"}),b&&(0,g.jsx)("p",{className:Z,children:b}),(0,g.jsx)(u.Z,{items:n}),"success"===d&&!n.length&&(0,g.jsx)("p",{children:"Nothing found"}),Boolean(n.length)&&(0,g.jsx)("button",{onClick:function(){N({search:w,page:L+1})},type:"button",children:"Load more"})]})},k=function(){return(0,g.jsxs)("div",{className:"container",children:[(0,g.jsx)("h1",{className:"page-title",children:"Posts page"}),(0,g.jsx)(b,{})]})}},387:function(e,t,n){n.d(t,{Jq:function(){return s},cl:function(){return a},u_:function(){return c},w8:function(){return o}});var r=n(1243).Z.create({baseURL:"https://jsonplaceholder.typicode.com/posts"}),s=function(){return r.get("/")},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return r.get("/",{params:{q:e,_page:t,_limit:4}})},c=function(e){return r.get("/".concat(e))},o=function(e){return r.get("/".concat(e,"/comments"))}},8703:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(7689),s=n(1087),a="post-list_list__Ic3M3",c="post-list_item__ECXwH",o="post-list_itemTitle__2wnZn",i=n(184),u=function(e){var t=e.items,n=void 0===t?[]:t,u=(0,r.TH)(),l=n.map((function(e){var t=e.id,n=e.title,r=e.body;return(0,i.jsxs)("li",{className:c,children:[(0,i.jsx)(s.rU,{to:"/posts/".concat(t),state:{from:u},className:o,children:n}),(0,i.jsx)("p",{children:r})]},t)}));return(0,i.jsx)("ul",{className:a,children:l})}}}]);
//# sourceMappingURL=834.ea9a1ed2.chunk.js.map